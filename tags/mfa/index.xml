<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>MFA on Note To Self ~One Step At A Time~</title><link>https://kkawazoe.github.io/tags/mfa/</link><description>Recent content in MFA on Note To Self ~One Step At A Time~</description><generator>Hugo -- gohugo.io</generator><language>jp</language><lastBuildDate>Thu, 22 Aug 2024 09:00:00 +0900</lastBuildDate><atom:link href="https://kkawazoe.github.io/tags/mfa/index.xml" rel="self" type="application/rss+xml"/><item><title>AWS CLI で MFA 認証を設定済の IAM ユーザを使用してコマンドを実行する方法</title><link>https://kkawazoe.github.io/blog/2024/08/22/how-to-execute-commands-in-the-aws-cli-using-an-iam-user-with-mfa-authentication-already-set-up/</link><pubDate>Thu, 22 Aug 2024 09:00:00 +0900</pubDate><guid>https://kkawazoe.github.io/blog/2024/08/22/how-to-execute-commands-in-the-aws-cli-using-an-iam-user-with-mfa-authentication-already-set-up/</guid><description>AWS CLI で MFA 認証を設定済の IAM ユーザを使用してコマンドを実行する方法について調査した結果を備忘録として残しておく
環境 OS: MacOS AWS にて IAM ユーザを作成して MFA 認証を設定済 aws-mfa をインストール済 aws-mfa 設定 IAM ユーザのアクセスキーを作成してダウンロード &amp;laquo;profile 名&amp;raquo;-long-term で Profile を設定 デフォルト Region, Output を設定したい場合は &amp;laquo;profile 名&amp;raquo; の Profile を設定 以下のコマンドを実行 # ARN は IAM &amp;gt; ユーザー &amp;gt; &amp;lt;&amp;lt;IAM ユーザ&amp;gt;&amp;gt; の [セキュリティ認証情報]タブ &amp;gt; 多要素認証 (MFA) の識別子のため注意 aws-mfa --device arn:aws:iam::&amp;lt;&amp;lt;AWS アカウント&amp;gt;&amp;gt;:mfa/&amp;lt;&amp;lt;IAM ユーザ&amp;gt;&amp;gt; --profile &amp;lt;&amp;lt;profile 名&amp;gt;&amp;gt; 追加で ~/.aws/credentials に以下を設定 [&amp;lt;profile 名&amp;gt;-long-term] aws_mfa_device = &amp;lt;&amp;lt;arn:aws:iam::*:mfa/${aws:username}&amp;gt;&amp;gt; 使用の仕方 AWS CLI にてコマンドを実行する前に以下のコマンドを実行する</description></item><item><title>ShellScript で MFA 認証設定済の IAM を使用して S3 に画像をアップロードする方法</title><link>https://kkawazoe.github.io/blog/2024/07/22/how-to-upload-images-to-s3-using-iam-with-mfa-authentication-configured-in-shell-script/</link><pubDate>Mon, 22 Jul 2024 12:00:00 +0900</pubDate><guid>https://kkawazoe.github.io/blog/2024/07/22/how-to-upload-images-to-s3-using-iam-with-mfa-authentication-configured-in-shell-script/</guid><description>ShellScript で MFA 認証設定済の IAM を使用して S3 に画像をアップロードする方法について調査した結果を備忘録として残しておく
環境 OS: MacOS aws-mfa をインストールして登録済 aws-mfa 設定を参照 aws-mfa 設定 通常の aws profile を設定 1 で設定した &amp;laquo;profile 名&amp;raquo;-long-term で Profile を設定 追加で ~/.aws/credentials に以下を設定 [&amp;lt;&amp;lt;profile 名&amp;gt;&amp;gt;-long-term] aws_mfa_device = &amp;lt;&amp;lt;arn:aws:iam::*:mfa/${aws:username}&amp;gt;&amp;gt; フォルダ構成 ./ ├── img/ │ └── image_001.png └── upload_image.sh 実際のコード &amp;lt;&amp;lt;AWS Profile Prefix&amp;gt;&amp;gt; 部分は実際の環境に応じて書き換える
#!/bin/sh # Shared AWS_PROFILE_PREFIX=&amp;lt;&amp;lt;AWS Profile Prefix&amp;gt;&amp;gt; IMAGE_UPLOAD_DIR=img read -p &amp;#34;Which environment connect to?</description></item></channel></rss>
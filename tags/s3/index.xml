<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>S3 on Note To Self ~One Step At A Time~</title><link>https://kkawazoe.github.io/tags/s3/</link><description>Recent content in S3 on Note To Self ~One Step At A Time~</description><generator>Hugo -- gohugo.io</generator><language>jp</language><lastBuildDate>Thu, 22 Aug 2024 09:30:00 +0900</lastBuildDate><atom:link href="https://kkawazoe.github.io/tags/s3/index.xml" rel="self" type="application/rss+xml"/><item><title>AWS CloudShell を使用して S3 バケット内のファイルをダウンロードする方法</title><link>https://kkawazoe.github.io/blog/2024/08/22/how-to-download-files-in-s3-buckets-using-aws-cloud-shell/</link><pubDate>Thu, 22 Aug 2024 09:30:00 +0900</pubDate><guid>https://kkawazoe.github.io/blog/2024/08/22/how-to-download-files-in-s3-buckets-using-aws-cloud-shell/</guid><description>AWS CloudShell を使用して S3 バケット内のファイルをダウンロードする方法について調査した結果を備忘録として残しておく
環境 OS: MacOS AWS CloudShell で実施 実際の手順 テキストファイルに S3 のオブジェクトパスを列挙
AWS ログイン
CloudShell 起動
1 の ファイルをファイルアップロード
フォルダ作成
mkdir tmp_folder 4 のファイルを移動 mv image_paths.txt tmp_folder/ cd tmp_folder S3 よりファイルをダウンロード while read line; do aws s3 cp s3://&amp;lt;&amp;lt;S3 Bucket 名&amp;gt;&amp;gt;/${line} .; done &amp;lt; &amp;#34;image_paths.txt&amp;#34; Text ファイル削除 rm -rf image_paths.txt Ps ファイル削除 rm -rf *.</description></item><item><title>ShellScript で MFA 認証設定済の IAM を使用して S3 に画像をアップロードする方法</title><link>https://kkawazoe.github.io/blog/2024/07/22/how-to-upload-images-to-s3-using-iam-with-mfa-authentication-configured-in-shell-script/</link><pubDate>Mon, 22 Jul 2024 12:00:00 +0900</pubDate><guid>https://kkawazoe.github.io/blog/2024/07/22/how-to-upload-images-to-s3-using-iam-with-mfa-authentication-configured-in-shell-script/</guid><description>ShellScript で MFA 認証設定済の IAM を使用して S3 に画像をアップロードする方法について調査した結果を備忘録として残しておく
環境 OS: MacOS aws-mfa をインストールして登録済 aws-mfa 設定を参照 aws-mfa 設定 通常の aws profile を設定 1 で設定した &amp;laquo;profile 名&amp;raquo;-long-term で Profile を設定 追加で ~/.aws/credentials に以下を設定 [&amp;lt;profile 名&amp;gt;-long-term] aws_mfa_device = &amp;lt;&amp;lt;arn:aws:iam::*:mfa/${aws:username}&amp;gt;&amp;gt; フォルダ構成 ./ ├── img/ │ └── image_001.png └── upload_image.sh 実際のコード &amp;laquo;&amp;hellip;&amp;raquo; 部分は実際の環境に応じて書き換える
#!/bin/sh # Shared AWS_PROFILE_PREFIX=&amp;lt;&amp;lt;AWS Profile Prefix&amp;gt;&amp;gt; IMAGE_UPLOAD_DIR=img read -p &amp;#34;Which environment connect to? (dev/stg/prd): &amp;#34; input_environment # Convert to uppercase environment=$(echo &amp;#34;${input_environment}&amp;#34; | tr &amp;#39;[:lower:]&amp;#39; &amp;#39;[:upper:]&amp;#39;) echo &amp;#34;【Start Processing】$(date &amp;#34;+%Y/%m/%d %H:%M:%S&amp;#34;)&amp;#34; &amp;gt;&amp;gt; ${LOG_FILE} 2&amp;gt;&amp;amp;1 # Check the environment case &amp;#34;${input_environment}&amp;#34; in &amp;#34;dev&amp;#34; | &amp;#34;stg&amp;#34; | &amp;#34;prd&amp;#34;) echo &amp;#34;Connecting to ${environment} environment.</description></item><item><title>S3 でアップロードされているオブジェクトの総数を取得する方法</title><link>https://kkawazoe.github.io/blog/2024/06/13/how-to-get-the-total-number-of-objects-uploaded-in-s3/</link><pubDate>Thu, 13 Jun 2024 12:00:00 +0900</pubDate><guid>https://kkawazoe.github.io/blog/2024/06/13/how-to-get-the-total-number-of-objects-uploaded-in-s3/</guid><description>S3 でアップロードされているオブジェクトの総数を取得する方法について調査した結果を備忘録として残しておく
実際のコード aws s3 ls s3://&amp;lt;&amp;lt;bucket-name/path/to/&amp;gt;&amp;gt; --recursive --human-readable --summarize その他 最終更新日の降順でソートして出力 UI 上だとできないのでコマンドを使用する
aws s3 ls s3://&amp;lt;&amp;lt;bucket-name/path/to/&amp;gt;&amp;gt; | sort -nr</description></item></channel></rss>
<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>RSpec on Note To Self ~One Step At A Time~</title><link>https://kkawazoe.github.io/tags/rspec/</link><description>Recent content in RSpec on Note To Self ~One Step At A Time~</description><generator>Hugo -- gohugo.io</generator><language>jp</language><lastBuildDate>Thu, 19 Jun 2025 00:00:00 +0900</lastBuildDate><atom:link href="https://kkawazoe.github.io/tags/rspec/index.xml" rel="self" type="application/rss+xml"/><item><title>RSpec で Cookie のテストを行う方法</title><link>https://kkawazoe.github.io/blog/2025/06/19/how-to-test-cookies-in-rspec/</link><pubDate>Thu, 19 Jun 2025 00:00:00 +0900</pubDate><guid>https://kkawazoe.github.io/blog/2025/06/19/how-to-test-cookies-in-rspec/</guid><description>RSpec で Cookie のテストを行う方法を備忘録として残しておく
環境 ruby: 3.0.5 rails: 6.1.7 テスト方法 RSpec の Controller テストで Cookie のテストを行いたい場合、response.cookies[‘key’] で Cookieの内容を取得してテストする
例. Controller 側で以下のような Cookie を設定していた場合
def sample cookies[&amp;#34;sample&amp;#34;] = &amp;#39;ok&amp;#39; end RSpec 側は以下のようにして値のテストを行うことができる
expect(response.cookies[&amp;#39;sample&amp;#39;]).to eq &amp;#39;ok&amp;#39;</description></item><item><title>rspec で factory bot を使用して複数テストを作成すると同時に関連するクラスを紐づけて動的に生成する方法</title><link>https://kkawazoe.github.io/blog/2022/10/30/how-to-dynamic-create-test-data-for-factory-bot-with-rspec/</link><pubDate>Sun, 30 Oct 2022 21:00:00 +0900</pubDate><guid>https://kkawazoe.github.io/blog/2022/10/30/how-to-dynamic-create-test-data-for-factory-bot-with-rspec/</guid><description>方法 create_list と send メソッドを使用して実現する
環境 ruby: 2.7.6 rails: 5.2.8.1 rspec 3.7.0 実際のコード user のテストデータを3つ作成 かつ 関連する user_status のテストデータを紐付けおよびカラム status を動的に生成する
let(:user_status1) { UserStatus::Active } let(:user_status2) { UserStatus::Locked } let(:user_status3) { UserStatus::InActive } before do create_list(:user, 3).each.with_index(1) do |user, i| create( :user_status, user: user, status: send(&amp;#34;user_status#{i}&amp;#34;), ) end end rspec 5.2 以降であれば以下も可能 参考
let(:user_status1) { UserStatus::Active } let(:user_status2) { UserStatus::Locked } let(:user_status3) { UserStatus::InActive } before do create_list(:user, 3) do |user, i| create( :user_status, user: user, status: send(&amp;#34;user_status#{i + 1}&amp;#34;), ) end end</description></item><item><title>特定の RSpec のみ実行されるようにする方法</title><link>https://kkawazoe.github.io/blog/2021/05/14/how-to-execute-specified-rspec/</link><pubDate>Fri, 14 May 2021 09:00:00 +0900</pubDate><guid>https://kkawazoe.github.io/blog/2021/05/14/how-to-execute-specified-rspec/</guid><description>個別カスタマイズ等で追加した RSpec のみ実行させる必要があり、調査した結果を備忘録として残しておく
方法 tag オプション を使用して実現する
環境 rspec: rspec 3.8 実際のコード # # :key =&amp;gt; &amp;#39;value&amp;#39; 形式でタグを付与可能 # Group(describe, context, it) に対して付与可能 # RSpec.describe &amp;#34;group with tagged specs&amp;#34; do it &amp;#34;example I&amp;#39;m working now&amp;#34;, focus: true do; end it &amp;#34;special example with string&amp;#34;, type: &amp;#39;special&amp;#39; do; end it &amp;#34;special example with symbol&amp;#34;, type: :special do; end it &amp;#34;slow example&amp;#34;, skip: true do; end it &amp;#34;ordinary example&amp;#34;, speed: &amp;#39;slow&amp;#39; do; end end 実行方法 例.</description></item><item><title>RSpec 内で動的に I18n の訳文を追加する</title><link>https://kkawazoe.github.io/blog/2019/09/14/dynamic-translate-for-i18n-with-rspec/</link><pubDate>Sat, 14 Sep 2019 09:56:37 +0900</pubDate><guid>https://kkawazoe.github.io/blog/2019/09/14/dynamic-translate-for-i18n-with-rspec/</guid><description>環境 rails: rails 5.2.3 方法 I18n::Backend::Base#store_translations を使用する
I18n.backend.store_translations( :ja, test: &amp;#39;テスト&amp;#39; ) I18n.t(:test) #=&amp;gt; テスト</description></item></channel></rss>
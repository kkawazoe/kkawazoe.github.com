<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>AWS Cognito on Note To Self ~One Step At A Time~</title><link>https://kkawazoe.github.io/tags/aws-cognito/</link><description>Recent content in AWS Cognito on Note To Self ~One Step At A Time~</description><generator>Hugo -- gohugo.io</generator><language>jp</language><lastBuildDate>Thu, 01 Feb 2024 00:00:00 +0900</lastBuildDate><atom:link href="https://kkawazoe.github.io/tags/aws-cognito/index.xml" rel="self" type="application/rss+xml"/><item><title>Amazon Cognito のユーザプールのバックアップおよびリストアを行う方法</title><link>https://kkawazoe.github.io/blog/2024/02/01/how-to-backup-and-restore-an-amazon-cognito-user-pool/</link><pubDate>Thu, 01 Feb 2024 00:00:00 +0900</pubDate><guid>https://kkawazoe.github.io/blog/2024/02/01/how-to-backup-and-restore-an-amazon-cognito-user-pool/</guid><description>Amazon Cognito のユーザプールのバックアップおよびリストアを行う方法について調査した内容を備忘録として残しておく
方法 以下の２つの方法が考えられる
Cognito User Profiles Export リファレンスアーキテクチャ Lambda でユーザプールの一覧を取得して csv で出力して S3 に保存する
※リストアはユーザ CSV インポート機能で行う 実際のコード const { stringify } = require(&amp;#34;csv-stringify/sync&amp;#34;); module.exports = async (params) =&amp;gt; { const csvString = stringify(params, { header: true, quoted_string: false }) return csvString; }; const { CognitoIdentityProvider } = require(&amp;#34;@aws-sdk/client-cognito-identity-provider&amp;#34;); const cognito = new CognitoIdentityProvider(); module.exports = async (param) =&amp;gt; { let cognitoUsers = new Array(); let cognitoData; try { let params = { UserPoolId: process.</description></item><item><title>Amazon Cognito でコマンドからユーザ登録およびパスワード設定を行う方法</title><link>https://kkawazoe.github.io/blog/2024/01/29/how-to-register-users-and-set-passwords-with-amazon-cognito-from-command/</link><pubDate>Mon, 29 Jan 2024 12:30:00 +0900</pubDate><guid>https://kkawazoe.github.io/blog/2024/01/29/how-to-register-users-and-set-passwords-with-amazon-cognito-from-command/</guid><description>Amazon Cognito でコマンドからユーザ登録およびパスワード設定を行う方法について調査した内容を備忘録として残しておく
方法 該当の AWS Console にログインして AWS Cloud Shell 上で以下のコマンドを実行する
実際のコード ユーザ登録
&amp;ndash;user-attributes は必要に応じて増やす
※「&amp;ndash;message-action SUPPRESS」のオプションを付与することで対象ユーザへの通知を止めることが可能
aws cognito-idp admin-create-user \ --user-pool-id &amp;lt;&amp;lt;ユーザプール ID&amp;gt;&amp;gt; \ --username &amp;lt;&amp;lt;E メールアドレス ※E メールアドレスをユーザ名に設定した場合&amp;gt;&amp;gt; \ --user-attributes Name=email,Value=&amp;lt;&amp;lt;E メールアドレス&amp;gt;&amp;gt; \ Name=email_verified,Value=TRUE \ --message-action SUPPRESS パスワード設定
&amp;ndash;no-permanent は仮パスワード扱い
※「&amp;ndash;permanent」オプションを付与で恒久パスワード扱いになる
aws cognito-idp admin-set-user-password \ --user-pool-id &amp;lt;&amp;lt;ユーザプール ID&amp;gt;&amp;gt; \ --username &amp;lt;&amp;lt;ユーザ名 or sub&amp;gt;&amp;gt; \ --password &amp;lt;&amp;lt;password&amp;gt;&amp;gt; \ --no-permanent</description></item><item><title>Amazon Cognito でユーザプールに登録されているユーザ一覧を取得する方法</title><link>https://kkawazoe.github.io/blog/2024/01/16/how-to-get-a-list-of-users-registered-in-user-pool-in-amazon-cognito/</link><pubDate>Tue, 16 Jan 2024 12:30:00 +0900</pubDate><guid>https://kkawazoe.github.io/blog/2024/01/16/how-to-get-a-list-of-users-registered-in-user-pool-in-amazon-cognito/</guid><description>Amazon Cognito でユーザプールに登録されているユーザ一覧を取得する方法について調査した内容を備忘録として残しておく
方法 該当の AWS Console にログインして AWS Cloud Shell 上で以下のコマンドを実行する
実際のコード aws cognito-idp list-users \ --user-pool-id {該当のユーザプール ID} \ --filter &amp;#34;{検索に使用する属性} = \&amp;#34;{検索文字列}\&amp;#34;&amp;#34; \ --attributes-to-get &amp;#34;{取得する属性(スペース区切りで複数指定可)}&amp;#34; \ | jq -r &amp;#39;.Users[] | [.Username, .Attributes[].Value] | @csv&amp;#39; \ | tr -d &amp;#39;&amp;#34;&amp;#39; \ &amp;gt; user_pool_list.csv</description></item></channel></rss>